# –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ TON –Ω–∞ Python

---

## üìÜ –ê–Ω–Ω–æ—Ç–∞—Ü–∏—è
–®–∞–±–ª–æ–Ω, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ Python, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ –≤ –±–ª–æ–∫—á–µ–π–Ω–µ TON —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `pytoniq`. –ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é, –Ω–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å—Ä–µ–¥—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –Ω–∞ —è–∑—ã–∫–µ Func, –≤–∫–ª—é—á–∞—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ –º–æ–¥—É–ª–∏.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
project_root/
‚îú‚îÄ‚îÄ contracts/     # –ò—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–¥—ã —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (.fc)
‚îú‚îÄ‚îÄ core/          # –û—Å–Ω–æ–≤–Ω—ã–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Contract –∏ Wallet
‚îú‚îÄ‚îÄ model/         # –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ service/       # –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ –∫–ª–∞—Å—Å—ã
‚îî‚îÄ‚îÄ utils/         # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
```

---

## üîç –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã

### `Contract`
–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –Ω–∞–¥ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º –≤ —Å–µ—Ç–∏ TON. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã:
- –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –í—ã–∑–æ–≤ get-–º–µ—Ç–æ–¥–æ–≤

#### –ü—Ä–∏–º–µ—Ä —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è
```python
contract = Contract(...)
contract.deploy()
```

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
```python
contract.send_internal_message("method", params)
```

#### –í—ã–∑–æ–≤ get-–º–µ—Ç–æ–¥–æ–≤
```python
result = contract.run_get_method("method_name", args)
```

---

### `AdminWallet`
–û–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ –∫–æ—à–µ–ª—å–∫–æ–º TON, —É–ø—Ä–∞–≤–ª—è—é—â–∞—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º —Å–æ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏.
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

#### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
```python
wallet = AdminWallet(config)
wallet.send_message(contract_address, payload)
```

---

### `DeployService`
–í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —è–¥—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞.

```python
from src.core.contract import Contract
from src.model.schemas import StateInit, AbstractMessage

class DeployService:

    async def deploy_smart_contract_via_client(self, state_init: StateInit) -> AbstractMessage:
        print("[DEPLOY SERVICE] = [Start Deploying Smart Contract]")
        result: AbstractMessage = await Contract(state_init = state_init).deploy_smart_contract_via_client()
        print(f"[DEPLOY SERVICE] = [{result.message}]")

        return result

    async def deploy_smart_contract_via_tonapi(self, state_init: StateInit) -> AbstractMessage:
        print("[DEPLOY SERVICE] = [Start Deploying Smart Contract]")
        result: AbstractMessage = await Contract(state_init = state_init).deploy_smart_contract_via_tonapi()
        print(f"[DEPLOY SERVICE] = [{result.message}]")

        return result
```

---
### –ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –∫–æ—à–µ–ª—å–∫–∞

#### `send_internal_message_via_client`
```python
async def send_internal_message_via_client(
    self,
    destination: str,
    amount: int,
    body: Cell = Cell.empty(),
    state_init: StateInit = None
) -> AbstractMessage:

    if self.provider_config is None:
        try:
            async with LiteClient.from_mainnet_config(trust_level = 2) as provider:

                wallet_v4r2: WalletV4R2 = await self.as_wallet_v4r2(provider = provider)

                await wallet_v4r2.transfer(
                    destination = destination,
                    amount = amount,
                    body = body,
                    state_init = state_init
                )

                return AbstractMessage(
                    message = "Success: External message was sent",
                    exit_code = 0
                )

        except(Exception) as ex:
            return AbstractMessage(
                message = f"Error: External message was not sent - {ex}",
                exit_code = -1
            )
```

### –ú–µ—Ç–æ–¥—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

#### `run_get_method`
```python
async def run_get_method(self, method_name: str) -> int:
    wallet = AdminWallet()

    if wallet.provider_config is None:
        async with LiteClient.from_mainnet_config(trust_level = 2) as provider:
            pytoniq_wallet = await AdminWallet().as_wallet_v4r2(provider = provider)
            result = await pytoniq_wallet.run_get_method(
                method = method_name,
                stack = []
            )
            return result

    async with LiteClient.from_mainnet_config(trust_level = wallet.provider_config) as provider:
        pytoniq_wallet = await AdminWallet().as_wallet_v4r2(provider = provider)
        result = await pytoniq_wallet.run_get_method(
            method = method_name,
            stack = []
        )
        return result
```

#### `send_message_to_smart_contract`
```python
async def send_message_to_smart_contract(
    self,
    body: Cell,
    amount: int = DEFAULT_AMOUNT
) -> AbstractMessage:

    wallet = AdminWallet()

    result = await wallet.send_internal_message_via_client(
        destination = self.address,
        amount = amount,
        body = body
    )

    return result
```

#### `deploy_smart_contract_via_client`
```python
async def deploy_smart_contract_via_client(
    self,
    amount: int = DEFAULT_AMOUNT
) -> AbstractMessage:

    wallet = AdminWallet()

    result = await wallet.send_internal_message_via_client(
        destination = self.address,
        amount = amount,
        state_init = PytoniqStateInit(
            data = self.state_init.data,
            code = self.state_init.code
        )
    )

    return result
```

---

## üìÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–µ–∫—Ç
–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:
```python
async def main():
    state_init = StateInit(
        code = await from_boc_to_cell(CODE_BOC_FORMAT),
        data = await as_init_data(number = 0)
    )

    contract = await Contract.create(state_init)
    result = await contract.deploy_smart_contract_via_client()

    print(result.message)
```

---

## üìñ –°–ø–∏—Å–æ–∫ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã
- –î—É—Ä–æ–≤ –ù. *Telegram Open Network*, 2 –º–∞—Ä—Ç–∞ 2019, 132 —Å—Ç—Ä–∞–Ω–∏—Ü—ã
